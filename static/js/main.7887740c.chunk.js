(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{37:function(e,t,a){e.exports=a(57)},43:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},57:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(19),c=a.n(l),s=(a(42),a(11)),i=a(12),o=a(14),u=a(13),m=a(15),h=a(6),d=a(17),p=a(16),b=(a(43),a(58)),v=a(59),E=a(60),g=a(61),f=a(62),y=a(63),j=a(64),O=a(65),S=a(3),N=a.n(S),k=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).toggle=a.toggle.bind(Object(h.a)(Object(h.a)(a))),a.state={activeTab:"1"},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"toggle",value:function(e){this.state.activeTab!==e&&this.setState({activeTab:e})}},{key:"render",value:function(){var e=this,t=this.props.entities||[];return r.a.createElement("div",null,r.a.createElement("p",null),r.a.createElement(b.a,{tabs:!0},r.a.createElement(v.a,null,r.a.createElement(E.a,{className:N()({active:"1"===this.state.activeTab}),onClick:function(){e.toggle("1")},href:"#"},"Entities")),r.a.createElement(v.a,null,r.a.createElement(E.a,{className:N()({active:"2"===this.state.activeTab}),onClick:function(){e.toggle("2")},href:"#"},"Intention"))),r.a.createElement(g.a,{activeTab:this.state.activeTab},r.a.createElement(f.a,{tabId:"1"},r.a.createElement(y.a,null,r.a.createElement(j.a,{sm:"12"},r.a.createElement(O.a,{hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Value"),r.a.createElement("th",null,"Type Name"),r.a.createElement("th",null,"Confidence Score"))),r.a.createElement("tbody",null,t.map(function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.entity_value),r.a.createElement("td",null,e.entity_type),r.a.createElement("td",null,parseFloat(e.confidence_score).toFixed(3)))})))))),r.a.createElement(f.a,{tabId:"2"},r.a.createElement(y.a,null,r.a.createElement(j.a,{sm:"12"},r.a.createElement(O.a,{hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Type"),r.a.createElement("th",null,"Confidence Score"))),r.a.createElement("tbody",null,r.a.createElement("tr",{key:"0"},r.a.createElement("td",null,this.props.intent.intent_type),r.a.createElement("td",null,parseFloat(this.props.intent.confidence_score).toFixed(3))))))))))}}]),t}(n.Component),U=a(66),w=a(67),C=a(68),x=a(69),T=a(70),R=(a(46),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).startUtt="please show me flights from pittsburgh to new york city on wednesday morning serving breakfast",a.urlStr="https://cionlu.herokuapp.com/api/v1/nlu",a.handleUtteranceChange=a.handleUtteranceChange.bind(Object(h.a)(Object(h.a)(a))),a.handleSubmitFrom=a.handleSubmitFrom.bind(Object(h.a)(Object(h.a)(a))),a.state={nluResponse:{entities:[{confidence_score:0,end:null,entity_type:"t1",entity_value:"slot1",start:null}],intent:{confidence_score:0,intent_type:"t1"},text:""}},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"handleUtteranceChange",value:function(e){var t=e.target.value;"\n"===t.charAt(t.length-1)?this.handleSubmitFrom(e):this.setState({utterance:e.target.value})}},{key:"handleSubmitFrom",value:function(e){var t=this;e.preventDefault();var a=new URL(this.urlStr),n={utterance:this.state.utterance};a.search=new URLSearchParams(n),fetch(a,{method:"GET",mode:"cors"}).then(function(e){if(200===e.status)return e.json()}).then(function(e){e&&t.setState({nluResponse:e})}).catch(function(e){return console.error("Error:",e)})}},{key:"componentDidMount",value:function(){var e=this;this.setState({utterance:this.startUtt});var t=new URL(this.urlStr),a={utterance:this.startUtt};t.search=new URLSearchParams(a),fetch(t,{method:"GET"}).then(function(e){if(200===e.status)return e.json()}).then(function(t){t&&e.setState({nluResponse:t})}).catch(function(e){return console.error("Error:",e)})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(U.a,{className:"nlu-content"},r.a.createElement(y.a,null,r.a.createElement(j.a,null,r.a.createElement("h5",null,"State something"),r.a.createElement(w.a,{onSubmit:this.handleSubmitFrom},r.a.createElement(C.a,null,r.a.createElement(x.a,{type:"textarea",name:"utterance",id:"utterance",value:this.state.utterance,onChange:this.handleUtteranceChange,placeholder:this.startUtt}),r.a.createElement(T.a,{className:"float-right submit-btn",color:"primary",type:"submit"},"Analyze"))))),r.a.createElement(y.a,null,r.a.createElement(j.a,null,r.a.createElement("h5",null,"See Language Understanding in action"),r.a.createElement(k,{intent:this.state.nluResponse.intent,entities:this.state.nluResponse.entities})))))}}]),t}(n.Component)),M=a(18);a(47);function _(e){return!0===e.isMe?r.a.createElement("div",{className:"row justify-content-end"},r.a.createElement("div",{className:"card message-card bg-lightblue m-1"},r.a.createElement("div",{className:"card-body p-2"},r.a.createElement("span",{className:"mx-2"},e.value)))):r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"card message-card m-1"},r.a.createElement("div",{className:"card-body p-2"},r.a.createElement("span",{className:"mx-2"},e.value))))}var F=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).scrollToBottom=function(){a.messagesEnd.scrollIntoView({behavior:"smooth"})},a.scrollToBottom=a.scrollToBottom.bind(Object(h.a)(Object(h.a)(a))),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.scrollToBottom()}},{key:"componentDidUpdate",value:function(){this.scrollToBottom()}},{key:"render",value:function(){var e=this,t=this.props.messages.map(function(e,t){return r.a.createElement(_,{value:e.text,isMe:e.isMe,key:t})});return r.a.createElement("div",{className:"container-fluid message-scroll"},t,r.a.createElement("div",{style:{float:"left",clear:"both"},ref:function(t){e.messagesEnd=t}}))}}]),t}(n.Component),D=function(e){function t(e){var a;Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).serverNotAvailableMsg="Incerc sa stabilesc conexiunea cu serverul de dialog, incearca te rog peste cateva momente",a.sessionExpiredMsg="Din cauza inactivitatii sesiunea de dialog s-a incheiat, voi deschide o noua conversatie.",a.restoreSessionWelcomeMsg="Bine ai revenit! Te pot ajuta cu trimiterea facturii curente sau cu actualizarea indexului. Scrie-mi daca mai ai nevoie de mine!",a.stopDialogVariable="$leg_op",a.startUtt="...";return a.apiUrl="".concat("http://0.0.0.0:5000","/api/v1"),a.handleUtteranceChange=a.handleUtteranceChange.bind(Object(h.a)(Object(h.a)(a))),a.handleSubmitFrom=a.handleSubmitFrom.bind(Object(h.a)(Object(h.a)(a))),a.handleResponse=a.handleResponse.bind(Object(h.a)(Object(h.a)(a))),a.state={stopDialog:!1,dialog:[],apiResponse:{},utterance:""},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"handleResponse",value:function(e){var t=this;e&&this.setState(function(a){var n,r=Object(M.a)(a.dialog),l=[];return e.outputs.forEach(function(e){l.push({isMe:!1,text:e})}),(n=e.dialog_state.context_variables[t.stopDialogVariable])&&l.length>0?r.push(l[0]):r=r.concat(l),{apiResponse:e,dialog:r,stopDialog:n}})}},{key:"componentDidMount",value:function(){var e=this,t=new URL(this.apiUrl+"/message"),a={input:{text:this.state.utterance}};fetch(t,{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"},credentials:"include",mode:"cors"}).then(function(e){if(200===e.status)return e.json()}).then(this.handleResponse).catch(function(t){e.setState(function(t){var a=Object(M.a)(t.dialog);return a.push({isMe:!1,text:e.serverNotAvailableMsg}),{dialog:a}}),console.error("Error:",t)})}},{key:"handleUtteranceChange",value:function(e){var t=e.target.value;"\n"===t.charAt(t.length-1)?this.handleSubmitFrom(e):this.setState({utterance:e.target.value})}},{key:"handleSubmitFrom",value:function(e){var t=this;e.preventDefault(),this.setState({utterance:""});var a=new URL("".concat(this.apiUrl,"/message"));this.setState(function(e){var a=Object(M.a)(e.dialog);return a.push({isMe:!0,text:t.state.utterance}),{dialog:a}});var n={input:{text:this.state.utterance},dialog_state:this.state.apiResponse.dialog_state};fetch(a,{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"},credentials:"include",mode:"cors"}).then(function(e){if(200===e.status)return e.json()}).then(this.handleResponse).catch(function(e){t.setState(function(e){var a=Object(M.a)(e.dialog);return a.push({isMe:!1,text:t.serverNotAvailableMsg}),{dialog:a}}),console.error("Error:",e)})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h5",null,"My Virtual Asisstant")),r.a.createElement("div",{className:"card-body d-flex flex-column p-1"},r.a.createElement(F,{messages:this.state.dialog}),r.a.createElement("form",{onSubmit:this.handleSubmitFrom,className:"mt-3 p-1"},r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",className:"form-control",id:"utterance",autoComplete:"off",value:this.state.utterance,onChange:this.handleUtteranceChange,placeholder:this.startUtt}),r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("button",{type:"submit",className:"btn btn-primary",disabled:this.state.stopDialog},"Send"))))))))))}}]),t}(n.Component),A=a(71),B=a(72),L=a(73),I=a(74),V=function(e){function t(e){var a;return Object(s.a)(this,t),a=Object(o.a)(this,Object(u.a)(t).call(this,e)),console.log("/nlu-demo"),a.toggleNavbar=a.toggleNavbar.bind(Object(h.a)(Object(h.a)(a))),a.state={collapsed:!0},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"toggleNavbar",value:function(){this.setState({collapsed:!this.state.collapsed})}},{key:"render",value:function(){return r.a.createElement(d.a,{basename:"/nlu-demo"},r.a.createElement("div",null,r.a.createElement(A.a,{color:"faded",light:!0,expand:"md"},r.a.createElement(B.a,{tag:d.b,to:"/",className:"mr-auto brand-title"},"CIO Dialog System"),r.a.createElement(L.a,{onClick:this.toggleNavbar,className:"mr-2"}),r.a.createElement(I.a,{isOpen:!this.state.collapsed,navbar:!0},r.a.createElement(b.a,{navbar:!0,right:"true",className:"ml-auto"},r.a.createElement(v.a,null,r.a.createElement(E.a,{tag:d.b,to:"/"},"Assistant")),r.a.createElement(v.a,null,r.a.createElement(E.a,{tag:d.b,to:"/nlu"},"NLU"))))),r.a.createElement(p.c,null,r.a.createElement(p.a,{path:"/nlu",component:R}),r.a.createElement(p.a,{path:"/",component:D}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(V,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[37,1,2]]]);
//# sourceMappingURL=main.7887740c.chunk.js.map